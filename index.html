<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blackjack Pro - Live Experience</title>
    <!-- Bibliotecas Externas -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://sdk.mercadopago.com/js/v2"></script>
    <!-- Fonte Moderna -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- CENÃRIO 3D -->
    <div class="scene">
        <!-- Luzes e Ambiente de Fundo -->
        <div class="background-decor">
            <div class="light-beam left"></div>
            <div class="light-beam right"></div>
        </div>

        <!-- A MESA INCLINADA -->
        <div class="table-container">
            <div class="table-surface">
                <!-- Textos pintados no feltro -->
                <div class="felt-decorations">
                    <h2>BLACKJACK PAYS 3:2</h2>
                    <p>Dealer must stand on 17 and draw to 16</p>
                </div>

                <!-- Sabot (Baralho FÃ­sico 3D) -->
                <div id="deck-visual" class="shoe-3d">
                    <div class="shoe-top"></div>
                </div>

                <!-- Ãrea Dealer -->
                <div id="dealer-area" class="zone dealer-zone">
                    <div class="zone-label">DEALER</div>
                    <div id="dealer-cards" class="cards-row"></div>
                    <div class="score-pill hidden" id="dealer-score-box">
                        <span id="dealer-score">0</span>
                    </div>
                </div>

                <!-- Ãrea Ãšnica do Jogador (Hero Spot) -->
                <div id="player-area" class="zone player-zone active-spot">
                    <div class="spot-light"></div>
                    <div class="zone-border"></div>
                    <div id="player-cards" class="cards-row"></div>
                    <div class="player-hud-floating">
                        <span class="label">VOCÃŠ</span>
                        <div class="score-badge" id="player-score">0</div>
                    </div>
                </div>
            </div> <!-- Fim Surface -->
            
            <!-- Borda de Madeira da Mesa -->
            <div class="table-edge"></div>
        </div>
    </div>

    <!-- INTERFACE 2D (HUD) - FICA SOBRE O 3D -->
    <div class="ui-layer">
        
        <!-- Topo: Info User -->
        <header id="user-header">
            <div class="profile-pill">
                <span class="avatar">ðŸ‘¤</span>
                <div class="user-details">
                    <span id="display-user-name">Convidado</span>
                    <span class="status-online">Online</span>
                </div>
            </div>
            <div class="top-actions">
                <button id="btn-deposit" onclick="abrirModalDeposito()" class="btn-gold-grad">
                    <span>+</span> R$
                </button>
                <button id="logout-button" onclick="logout()" class="btn-icon">Exit</button>
            </div>
        </header>

        <!-- Mensagens Flutuantes (VitÃ³ria/Derrota) -->
        <!-- Mantive os IDs para nÃ£o quebrar o JS, mas mudei o CSS -->
        <div id="victory-overlay" class="game-message win">
            <h1>VOCÃŠ VENCEU</h1>
            <button onclick="fecharCelebracao()">Continuar</button>
        </div>
        <div id="defeat-overlay" class="game-message lose">
            <h1>BANCA VENCEU</h1>
            <button onclick="fecharDerrota()">Tentar Novamente</button>
        </div>
        <div id="tie-overlay" class="game-message tie">
            <h1>EMPATE</h1>
            <button onclick="fecharTie()">Retornar Aposta</button>
        </div>

        <!-- Controles Inferiores -->
        <div class="bottom-bar">
            <!-- Saldo e Apostas -->
            <div class="financial-panel">
                <div class="finance-item">
                    <span class="lbl">SALDO</span>
                    <span class="val">R$ <span id="balance">0.00</span></span>
                </div>
                <div class="finance-item">
                    <span class="lbl">APOSTA</span>
                    <span class="val bet-val">R$ <span id="current-bet">0</span></span>
                </div>
            </div>

            <!-- Fichas (Centralizado) -->
            <div id="chips-area" class="chips-container">
                <div class="chip chip-10" onclick="apostar(10)">10</div>
                <div class="chip chip-50" onclick="apostar(50)">50</div>
                <div class="chip chip-100" onclick="apostar(100)">100</div>
                <button id="clear-bet" onclick="limparAposta()" class="btn-text">Limpar</button>
            </div>

            <!-- AÃ§Ãµes (Direita) -->
            <div id="controls" class="action-panel">
                <button id="reset-button" class="btn-big deal">DISTRIBUIR CARTAS</button>
                <div class="in-game-buttons">
                    <button id="hit-button" class="btn-action hit hidden">
                        <span class="icon">+</span> PEDIR
                    </button>
                    <button id="stand-button" class="btn-action stand hidden">
                        <span class="icon">âœ‹</span> PARAR
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modais de Login/Pix (Mantendo a estrutura base) -->
    <div id="login-screen" class="modal-glass">
        <div class="glass-card">
            <h2 id="login-title">Blackjack Live</h2>
            <p>FaÃ§a login para jogar</p>
            <input type="text" id="user-name" placeholder="Seu Nome" class="input-glass" style="display:none;">
            <input type="email" id="user-email" placeholder="E-mail" class="input-glass">
            <input type="password" id="user-pass" placeholder="Senha" class="input-glass">
            <button onclick="fazerLogin()" id="btn-login" class="btn-neon">ENTRAR</button>
            <p id="toggle-text" class="link-small" onclick="toggleLogin()">Criar Conta</p>
        </div>
    </div>

    <div id="pix-modal" class="modal-glass hidden-init">
        <div class="glass-card">
            <h3>Adicionar Fundos</h3>
            <div id="deposit-options">
                <input type="number" id="pix-valor" placeholder="Valor (R$)" class="input-glass">
                <div class="pay-btns">
                    <button onclick="gerarFormularioCartao()" class="btn-glass">CartÃ£o</button>
                    <button onclick="solicitarPix()" class="btn-neon">Gerar PIX</button>
                </div>
            </div>
            <div id="cardPaymentBrick_container"></div>
            <div id="pix-resultado" style="display:none; text-align:center;">
                <p>Escaneie o QR Code:</p>
                <img id="pix-img" style="width: 150px; border-radius:10px;">
                <input id="pix-copia-cola" readonly class="input-glass" style="font-size:10px;">
            </div>
            <button onclick="fecharModalPix()" class="link-small" style="background:none; border:none; margin-top:10px;">Cancelar</button>
        </div>
    </div>

    <script src="script.js"></script>
    <style> .hidden-init { display: none !important; } </style>
</body>
</html>